[program:telegram-bot-downloads-worker]
process_name=%(program_name)s_%(process_num)02d
command=php /path/to/your/project/artisan queue:work redis-downloads --queue=downloads --sleep=3 --tries=2 --max-time=3600 --timeout=60 --max-jobs=50
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
user=www-data
numprocs=2
redirect_stderr=true
stdout_logfile=/path/to/your/project/storage/logs/queue-downloads.log
stopwaitsecs=3600
; Memory limits (in bytes, 0 = unlimited)
; 512MB per worker
memlimit=536870912
; Priority (lower = higher priority, range: -20 to 19)
priority=999
; Stop signal (SIGTERM for graceful shutdown)
stopsignal=TERM
; Wait time before sending SIGKILL
stopwaitsecs=30
; Restart if exited unexpectedly
exitcodes=0,2
; Don't restart if exited normally
startretries=3
; Environment variables
environment=PHP_MEMORY_LIMIT="512M"

[program:telegram-bot-telegram-worker]
process_name=%(program_name)s_%(process_num)02d
command=php /path/to/your/project/artisan queue:work redis-telegram --queue=telegram --sleep=1 --tries=3 --max-time=3600 --timeout=10 --max-jobs=100
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
user=www-data
numprocs=4
redirect_stderr=true
stdout_logfile=/path/to/your/project/storage/logs/queue-telegram.log
stopwaitsecs=3600
; Memory limits (256MB per worker for lightweight operations)
memlimit=268435456
priority=999
stopsignal=TERM
stopwaitsecs=30
exitcodes=0,2
startretries=3
environment=PHP_MEMORY_LIMIT="256M"
